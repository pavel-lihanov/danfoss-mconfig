{% load i18n %}

<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
<script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous">
</script>
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous">
</script>
<style>
.main_area {
    padding: 10px;
}

.left_bar {
    border: 1px solid #d8d9db;
    padding: 12px;
    text-align: center;
    vertical-align: top;
    width: 146px;
}

.question {
    border: 1px solid #d8d9db;
    padding: 4px;
    text-align: center;
    vertical-align: top;
	margin: 4px;
}
</style>
</head>

<body>

<script type='text/javascript'>

function updateResult() {
	var f;
	if (this.readyState == 4 && this.status == 200) {						
		data = JSON.parse(this.responseText);
		updatePackage(data.package);
		updatePrice(data.price);
		document.getElementById("err_panel").style.display="none";
	} else {
		document.getElementById("err_panel").style.display="block";
		document.getElementById("err_text").innerHTML = "Server error";		
	}
	//document.getElementById("progress").innerHTML="Update done";
}

$( document ).ready(function() {
	//so we don't depend on templates to fill in the values
	var xhttp = new XMLHttpRequest();				
	xhttp.onreadystatechange = updateResult;

	xhttp.open('GET', 'refresh', true);
	xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');	
	xhttp.send();
});

</script>

<div id="err_panel" class="w3-panel w3-orange w3-card-8" {% if error_message %}style="display:block;"{%else%}style="display:none;"{%endif%}>
	<span class="w3-closebtn" onclick="this.parentElement.style.display='none'">X</span>
	<p id="err_text"><strong>{{ error_message }}</strong></p>
</div>

<table class="mainContainer" style="border: 1px solid; padding: 10px;">
	<tr>
		<td class="main_area">					
			<div id="main_area">
				<form id="package" name="question_form" style="border: 1px solid; padding: 10px;">
					{% for package in question.packages %}
						{% include package.template with package=package unpriced=False only %}
						<br>
					{% endfor %}
				</form>
			</div>
		</td>
	</tr>
</table>

<form action="prev" method="post" style="display: inline; float: left; padding: 10px;">
	{% csrf_token %}
	<input type="submit" value="{% trans 'Prev' %}"/>
</form>

</body>